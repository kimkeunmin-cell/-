import streamlit as st
import math

def main():
    st.title("ğŸ§® ê³„ì‚°ê¸° ì›¹ì•±")
    st.write("ì‚¬ì¹™ì—°ì‚°, ëª¨ë“ˆëŸ¬, ì§€ìˆ˜, ë¡œê·¸ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.")
    st.write("---")

    # ì—°ì‚° ì¢…ë¥˜ ë¨¼ì € ì„ íƒ
    ì—°ì‚° = st.selectbox(
        "ì›í•˜ì‹œëŠ” ì—°ì‚°ì„ ì„ íƒí•˜ì„¸ìš”:",
        ("ë§ì…ˆ (+)", "ëº„ì…ˆ (-)", "ê³±ì…ˆ (Ã—)", "ë‚˜ëˆ—ì…ˆ (Ã·)", "ëª¨ë“ˆëŸ¬ (a mod b)", "ì§€ìˆ˜ (a^b)", "ë¡œê·¸ (log_b a)")
    )

    # ì—°ì‚° ì¢…ë¥˜ì— ë”°ë¼ ì…ë ¥ í•„ë“œ ë° ì„¤ëª… ë³€ê²½
    if ì—°ì‚° == "ë§ì…ˆ (+)":
        st.write("ë‘ ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš”. ê²°ê³¼ëŠ” ì²« ë²ˆì§¸ ìˆ«ì + ë‘ ë²ˆì§¸ ìˆ«ì ì…ë‹ˆë‹¤.")
        a = st.number_input("ì²« ë²ˆì§¸ ìˆ«ì", value=0.0, key="add_a")
        b = st.number_input("ë‘ ë²ˆì§¸ ìˆ«ì", value=0.0, key="add_b")
    elif ì—°ì‚° == "ëº„ì…ˆ (-)":
        st.write("ë‘ ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš”. ê²°ê³¼ëŠ” ì²« ë²ˆì§¸ ìˆ«ì âˆ’ ë‘ ë²ˆì§¸ ìˆ«ì ì…ë‹ˆë‹¤.")
        a = st.number_input("ì²« ë²ˆì§¸ ìˆ«ì", value=0.0, key="sub_a")
        b = st.number_input("ë‘ ë²ˆì§¸ ìˆ«ì", value=0.0, key="sub_b")
    elif ì—°ì‚° == "ê³±ì…ˆ (Ã—)":
        st.write("ë‘ ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš”. ê²°ê³¼ëŠ” ì²« ë²ˆì§¸ ìˆ«ì Ã— ë‘ ë²ˆì§¸ ìˆ«ì ì…ë‹ˆë‹¤.")
        a = st.number_input("ì²« ë²ˆì§¸ ìˆ«ì", value=0.0, key="mul_a")
        b = st.number_input("ë‘ ë²ˆì§¸ ìˆ«ì", value=0.0, key="mul_b")
    elif ì—°ì‚° == "ë‚˜ëˆ—ì…ˆ (Ã·)":
        st.write("ë‘ ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš”. ê²°ê³¼ëŠ” ì²« ë²ˆì§¸ ìˆ«ì Ã· ë‘ ë²ˆì§¸ ìˆ«ì ì…ë‹ˆë‹¤. ë‘ ë²ˆì§¸ ìˆ«ìëŠ” 0ì´ ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
        a = st.number_input("ì²« ë²ˆì§¸ ìˆ«ì", value=0.0, key="div_a")
        b = st.number_input("ë‘ ë²ˆì§¸ ìˆ«ì (0ì´ ì•„ë‹™ë‹ˆë‹¤)", value=1.0, key="div_b")
    elif ì—°ì‚° == "ëª¨ë“ˆëŸ¬ (a mod b)":
        st.write("ë‘ ì •ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”. ê²°ê³¼ëŠ” ì²« ë²ˆì§¸ ì •ìˆ˜ mod ë‘ ë²ˆì§¸ ì •ìˆ˜ ì…ë‹ˆë‹¤. ë‘ ë²ˆì§¸ ì •ìˆ˜ëŠ” 0ì´ ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
        a = st.number_input("ì²« ë²ˆì§¸ ì •ìˆ˜", value=0, step=1, format="%d", key="mod_a")
        b = st.number_input("ë‘ ë²ˆì§¸ ì •ìˆ˜ (0ì´ ì•„ë‹™ë‹ˆë‹¤)", value=1, step=1, format="%d", key="mod_b")
    elif ì—°ì‚° == "ì§€ìˆ˜ (a^b)":
        st.write("ë‘ ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš”. ê²°ê³¼ëŠ” ì²« ë²ˆì§¸ ìˆ«ì ^ ë‘ ë²ˆì§¸ ìˆ«ì (ì²« ë²ˆì§¸ ìˆ«ìì˜ ë‘ ë²ˆì§¸ ìˆ«ìë§Œí¼ ê±°ë“­ì œê³±) ì…ë‹ˆë‹¤.")
        a = st.number_input("ë°‘ (a)", value=0.0, key="exp_a")
        b = st.number_input("ì§€ìˆ˜ (b)", value=1.0, key="exp_b")
    elif ì—°ì‚° == "ë¡œê·¸ (log_b a)":
        st.write("ë‘ ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš”. ê²°ê³¼ëŠ” ë°‘(b)ì„ ê¸°ì¤€ìœ¼ë¡œ í•œ ë¡œê·¸ ê°’ì…ë‹ˆë‹¤. a>0, b>0 ê·¸ë¦¬ê³  bâ‰ 1 ì´ì–´ì•¼ í•©ë‹ˆë‹¤.")
        a = st.number_input("ë¡œê·¸í•  ìˆ«ì (a, a>0)", value=1.0, key="log_a")
        b = st.number_input("ë°‘ (b, b>0 ê·¸ë¦¬ê³  bâ‰ 1)", value=10.0, key="log_b")
    else:
        st.error("ì•Œ ìˆ˜ ì—†ëŠ” ì—°ì‚°ì…ë‹ˆë‹¤.")
        return

    # ì—°ì‚° ì‹¤í–‰ ë° ê²°ê³¼ ë¿Œë¦¬ê¸°
    error = None
    result = None
    try:
        if ì—°ì‚° == "ë§ì…ˆ (+)":
            result = a + b
        elif ì—°ì‚° == "ëº„ì…ˆ (-)":
            result = a - b
        elif ì—°ì‚° == "ê³±ì…ˆ (Ã—)":
            result = a * b
        elif ì—°ì‚° == "ë‚˜ëˆ—ì…ˆ (Ã·)":
            if b == 0:
                error = "ì˜¤ë¥˜: ë‘ ë²ˆì§¸ ìˆ«ìê°€ 0ì´ë©´ ë‚˜ëˆ—ì…ˆì„ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."
            else:
                result = a / b
        elif ì—°ì‚° == "ëª¨ë“ˆëŸ¬ (a mod b)":
            if b == 0:
                error = "ì˜¤ë¥˜: ë‘ ë²ˆì§¸ ì •ìˆ˜ê°€ 0ì´ë©´ ëª¨ë“ˆëŸ¬ ì—°ì‚°ì„ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."
            else:
                # ì •ìˆ˜ë¡œ ë³€í™˜í•˜ì—¬ ê³„ì‚°
                result = int(a) % int(b)
        elif ì—°ì‚° == "ì§€ìˆ˜ (a^b)":
            result = a ** b
        elif ì—°ì‚° == "ë¡œê·¸ (log_b a)":
            if a <= 0 or b <= 0 or b == 1:
                error = "ì˜¤ë¥˜: ë¡œê·¸ ê³„ì‚° ì‹œì—ëŠ” a>0, b>0 ê·¸ë¦¬ê³  bâ‰ 1 ì´ì–´ì•¼ í•©ë‹ˆë‹¤."
            else:
                result = math.log(a, b)
        else:
            error = "ì•Œ ìˆ˜ ì—†ëŠ” ì—°ì‚°ì…ë‹ˆë‹¤."
    except Exception as e:
        error = f"ì˜¤ë¥˜ ë°œìƒ: {e}"

    st.write("---")
    if error:
        st.error(error)
    else:
        st.success(f"ê²°ê³¼: {result}")

if __name__ == "__main__":
    main()
